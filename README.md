# Torrent-list

感谢你找到了这个小项目😊（嘿嘿）

这是一个基于 Express.js 的磁力种子存储站。

## 特别鸣谢

特别感谢 [yang杨](https://github.com/yang1145) 对本项目前端界面的精心优化！您的贡献使界面更加美观、直观和易用。

## 官方网站: [来看看吧~](https://wap-ac.ybmq.dpdns.org/)
注：亲爱的四川移动，河北移动，重庆移动网友，你们本地的运营商似乎屏蔽了我的域名😡😡😡

## 功能特性

### 用户系统
- **用户注册与登录**：支持新用户注册和现有用户登录
- **权限管理**：
  - 普通用户：可上传、查看和删除自己上传的文件
  - 管理员：可管理所有用户文件
- **默认管理员账号**：`admin/Zako114514`（首次运行自动创建）

### 文件管理
- **文件上传**：
  - 支持登陆后的用户上传 .torrent 文件（最大50MB）
  - 自动解析种子文件元数据
- **文件浏览**：
  - 文件列表展示（文件名、大小、上传者、上传时间）
  - 实时搜索功能（按文件名或上传者）
- **文件详情**：
  - 显示种子完整元数据（InfoHash、文件列表、Tracker服务器等）
- **文件操作**：
  - 下载原始种子文件
  - 删除文件（用户只能删除自己的文件，管理员可删除所有文件）

### 安全特性
- **密码加密**：使用 bcrypt 进行密码哈希存储
- **会话管理**：基于 Cookie 的登录认证（24小时有效期）
- **文件类型限制**：仅允许上传 .torrent 文件
- **权限验证**：所有操作均进行用户权限检查

## 技术栈

### 后端
- **框架**：Express.js
- **文件上传**：Multer
- **密码加密**：bcryptjs
- **种子解析**：parse-torrent
- **数据格式化**：pretty-bytes
- **请求解析**：body-parser, cookie-parser

### 前端
- **响应式设计**：适配桌面和移动设备
- **用户界面**：卡片式布局，直观易用
- **交互体验**：实时进度条，即时反馈

## 安装与运行

1. 克隆仓库
```bash
git clone [仓库地址]
```

2. 安装依赖
```bash
npm install
```

3. 运行服务器
```bash
node server.js
```

服务器将在 http://localhost:3000 启动

## API 接口

### 用户相关
- POST `/register` - 用户注册
- POST `/login` - 用户登录
- POST `/logout` - 用户登出

### 文件相关
- POST `/upload` - 上传文件
- GET `/files` - 获取文件列表
- GET `/file/:savedName` - 获取单个文件详情
- POST `/delete` - 删除文件

## 存储结构

- `users.json` - 用户数据
- `files.json` - 文件元数据
- `uploads/` - 文件存储目录

## 使用说明

1. **首次运行**：
   - 系统会自动创建管理员账号：`admin/Zako114514` （可在第一次启动前自由更改）
   - 自动创建必要的存储目录和文件

2. **用户操作**：
   - 注册新账号或使用管理员账号登录
   - 上传 .torrent 文件
   - 浏览文件列表，查看文件详情
   - 下载或删除文件（根据权限）

## 注意事项

1. **安全建议**：
   - 首次启动前建议修改默认管理员密码
   - 生产环境建议启用 HTTPS
   - 定期备份重要数据

2. **文件管理**：
   - 仅支持 .torrent 文件上传
   - 文件大小限制为 50MB
   - 删除文件会同时删除物理文件和元数据记录

3. **数据存储**：
   - 用户数据存储在 `users.json`
   - 文件元数据存储在 `files.json`
   - 上传文件存储在 `uploads/` 目录

## 未来计划

- 添加用户个人资料管理（如更改密码）
- 添加数据库支持（Postgresql）
- 。。。。。。

## 许可证

本项目采用 MIT LICENSE 开源
